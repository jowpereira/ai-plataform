{
  "workspace": {
    "name": "generic-worker-lab",
    "description": "Fluxo multiagente com model profiles",
    "max_iterations": 6
  },
  "models": {
    "profiles": {
      "azure_gpt4": {
        "id": "azure_gpt4",
        "client_type": "azure",
        "model": "$AZURE_OPENAI_DEPLOYMENT_NAME",
        "default_params": {
          "temperature": 0.7,
          "max_tokens": 2000
        }
      },
      "openai_fast": {
        "id": "openai_fast", 
        "client_type": "openai",
        "model": "gpt-4o-mini",
        "default_params": {
          "temperature": 0.3
        }
      }
    },
    "default_profile": "azure_gpt4"
  },
  "resources": {
    "tools": {
      "fetch_weather": {
        "id": "fetch_weather",
        "function_path": "scripts.worker_test.tools:fetch_weather",
        "enabled": true
      },
      "summarize_guidelines": {
        "id": "summarize_guidelines", 
        "function_path": "scripts.worker_test.tools:summarize_guidelines",
        "enabled": true
      },
      "compute_costs": {
        "id": "compute_costs",
        "function_path": "scripts.worker_test.tools:compute_costs",
        "enabled": true
      }
    },
    "global_middleware": [
      {
        "id": "tool_logger",
        "type": "function",
        "class_path": "worker.middleware.logging_middleware.ToolLoggingMiddleware",
        "enabled": true
      }
    ]
  },
  "agents": {
    "router": {
      "id": "router",
      "name": "Dynamic Router",
      "model_profile": "azure_gpt4",
      "instructions": "Você avalia a solicitação, decide quais ferramentas ou especialistas devem atuar e sempre fornece um resumo estruturado na saída.",
      "tools": ["fetch_weather", "summarize_guidelines"],
      "enabled": true
    },
    "specialist": {
      "id": "specialist", 
      "name": "Ops Specialist",
      "model_profile": "azure_gpt4",
      "instructions": "Você detalha ações operacionais com listas numeradas e valida dados com as ferramentas disponíveis.",
      "tools": ["summarize_guidelines", "compute_costs"],
      "enabled": true
    },
    "synthesizer": {
      "id": "synthesizer",
      "name": "Executive Synthesizer", 
      "model_profile": "azure_gpt4",
      "instructions": "Você transforma toda a conversa em um briefing executivo com próximos passos, métricas e alertas.",
      "tools": ["summarize_guidelines"],
      "enabled": true
    }
  },
  "orchestration": {
    "type": "sequential",
    "start": "router",
    "edges": [
      {
        "kind": "direct",
        "source": "router",
        "target": "specialist"
      },
      {
        "kind": "direct", 
        "source": "specialist",
        "target": "synthesizer"
      }
    ],
    "terminal_nodes": ["synthesizer"]
  }
}