{
  "name": "Transferência para Humano",
  "description": "Demonstra um agente transferindo uma tarefa para um usuário humano.",
  "version": "1.0",
  "resources": {
    "models": {
      "gpt-4o-mini": {
        "type": "azure-openai",
        "deployment": "gpt-4o-mini"
      }
    },
    "tools": []
  },
  "agents": [
    {
      "id": "support_bot",
      "role": "Suporte",
      "model": "gpt-4o-mini",
      "instructions": "Você é um bot de suporte. Se o usuário pedir um humano ou se você não puder ajudar, diga 'ESCALAR'. Caso contrário, responda à pergunta."
    }
  ],
  "workflow": {
    "type": "dag",
    "start_step": "start",
    "nodes": [
      {
        "id": "start",
        "type": "_InputToConversation"
      },
      {
        "id": "bot_step",
        "type": "agent",
        "agent": "support_bot"
      },
      {
        "id": "check_escalation",
        "type": "router",
        "config": {
            "expression": "input"
        }
      },
      {
        "id": "human_step",
        "type": "human",
        "label": "Suporte Humano",
        "config": {
            "instructions": "Por favor, ajude o usuário com sua solicitação."
        }
      },
      {
        "id": "end",
        "type": "_EndWithConversation"
      }
    ],
    "edges": [
      {
        "source": "start",
        "target": "bot_step"
      },
      {
        "source": "bot_step",
        "target": "check_escalation"
      },
      {
        "source": "check_escalation",
        "target": "human_step",
        "condition": "'escalar' in str(value).lower()"
      },
      {
        "source": "check_escalation",
        "target": "end",
        "type": "default"
      },
      {
        "source": "human_step",
        "target": "end"
      }
    ]
  }
}